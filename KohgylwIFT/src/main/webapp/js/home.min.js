/**
 * home.jsp
 */
function getServerOS(){$.ajax({type:"POST",dataType:"text",data:{},url:"homeController/getServerOS.ajax",success:function(a){"mustLogin"==a&&(window.location.href="login.jsp"),$("#serverOS").text(a)},error:function(){$("#serverOS").html("<a onclick='getServerOS()'>获取失败，点击重试</a>")}})}function showFolderView(fid){$.ajax({type:"POST",dataType:"text",data:{fid:fid},url:"homeController/getFolderView.ajax",success:function(result){if("mustLogin"==result)window.location.href="login.jsp";else{var folderView=eval("("+result+")");locationpath=folderView.folder.folderId,parentpath=folderView.folder.folderParent,showParentList(folderView),showAccountView(folderView),showPublishTime(folderView),showFolderTable(folderView)}},error:function(){$("#tb").html("<span class='graytext'>获取失败，请尝试刷新</span>"),$("#publishTime").html("<span class='graytext'>获取失败，请尝试刷新</span>"),$("#parentlistbox").html("<span class='graytext'>获取失败，请尝试刷新</span>")}})}function dologin(){var a=$("#accountid").val(),b=$("#accountpwd").val(),c="y";0==a.length?($("#accountidbox").addClass("has-error"),c="n"):$("#accountidbox").removeClass("has-error"),0==b.length?($("#accountpwdbox").addClass("has-error"),c="n"):$("#accountpwdbox").removeClass("has-error"),"y"==c&&$.ajax({type:"POST",dataType:"text",url:"homeController/doLogin.ajax",data:{accountid:a,accountpwd:b},success:function(a){$("#alertbox").removeClass("alert"),$("#alertbox").removeClass("alert-danger"),$("#alertbox").text(""),"permitlogin"==a?($("#accountidbox").removeClass("has-error"),$("#accountpwdbox").removeClass("has-error"),window.location.href="home.jsp"):"accountnotfound"==a?($("#accountidbox").addClass("has-error"),$("#accountpwdbox").removeClass("has-error"),$("#alertbox").addClass("alert"),$("#alertbox").addClass("alert-danger"),$("#alertbox").text("提示：登录失败，账户不存在或未设置")):"accountpwderror"==a?($("#accountpwdbox").addClass("has-error"),$("#accountidbox").removeClass("has-error"),$("#alertbox").addClass("alert"),$("#alertbox").addClass("alert-danger"),$("#alertbox").text("提示：登录失败，密码错误或未设置")):($("#alertbox").addClass("alert"),$("#alertbox").addClass("alert-danger"),$("#alertbox").text("提示：无法登录，未知错误"))},error:function(){$("#alertbox").addClass("alert"),$("#alertbox").addClass("alert-danger"),$("#alertbox").text("提示：登录请求失败，请检查网络或服务器运行状态")}})}function dologout(){$("#logoutModal").modal("hide"),window.location.href="homeController/doLogout.do"}function showParentList(a){var b,c;$("#parentlistbox").html(""),b=a.folder,c=0,$.each(a.parentList,function(a,b){3>=c&&($("#parentlistbox").append("<button onclick='entryFolder(\""+b.folderId+'"'+")' class='btn btn-link btn-xs'>"+b.folderName+"</button> / "),c++)}),c>3&&$("#parentlistbox").append("... / "),$("#parentlistbox").append(b.folderName)}function showAccountView(a){$("#tb").html(""),null!=a.account?$("#tb").append("<button class='btn btn-link rightbtn' data-toggle='modal' data-target='#logoutModal'>注销 ["+a.account+"] <span class='glyphicon glyphicon-off' aria-hidden='true'></span></button>"):$("#tb").append("<button class='btn btn-link rightbtn' data-toggle='modal' data-target='#loginModal'>登入<span class='glyphicon glyphicon-user' aria-hidden='true'></span></button>");var b=a.authList;null!=b&&(checkAuth(b,"C")&&$("#parentlistbox").append("<button onclick='showNewFolderModel()' class='btn btn-link btn-xs rightbtn'><span class='glyphicon glyphicon-folder-open'></span> 新建文件夹</button>"),checkAuth(b,"U")&&$("#parentlistbox").append("<button onclick='showUploadFileModel()' class='btn btn-link btn-xs rightbtn'><span class='glyphicon glyphicon-cloud-upload'></span> 上传文件</button>"),checkAuth(b,"L")&&$("#parentlistbox").append("<button onclick='showDownloadAllCheckedModel()' class='btn btn-link btn-xs rightbtn'><span class='glyphicon glyphicon-cloud-download'></span> 打包下载</button>"),checkAuth(b,"D")&&$("#parentlistbox").append("<button onclick='showDeleteAllCheckedModel()' class='btn btn-link btn-xs rightbtn'><span class='glyphicon glyphicon-trash'></span> 批量删除</button>"))}function checkAuth(a,b){var c=!1;return $.each(a,function(a,d){d==b&&(c=!0)}),c}function showPublishTime(a){$("#publishTime").html("");var b="";b=null!=a.publishTime?a.publishTime:"--",$("#publishTime").text(b)}function refreshFolderView(){null!=locationpath&&locationpath.length>0?showFolderView(locationpath):showFolderView("root")}function returnPF(){null!=parentpath&&"null"!=parentpath?showFolderView(parentpath):showFolderView("root")}function showFolderTable(a){var b,c,d,e;$("#foldertable").html(""),null!=parentpath&&"null"!=parentpath&&$("#foldertable").append("<tr onclick='returnPF()'><td><button onclick='returnPF()' class='btn btn-link btn-xs'>../</button></td><td>--</td><td>--</td><td>--</td><td>--</td></tr>"),b=a.authList,c=!1,d=!1,e=!1,checkAuth(b,"D")&&(c=!0),checkAuth(b,"R")&&(d=!0),checkAuth(b,"L")&&(e=!0),$.each(a.folderList,function(a,b){var e="<tr><td><button onclick='entryFolder(\""+b.folderId+'"'+")' class='btn btn-link btn-xs'>/"+b.folderName+"</button></td><td>"+b.folderCreationDate+"</td><td>--</td><td>"+b.folderCreator+"</td><td>";c&&(e=e+"<button onclick='showDeleteFolderModel("+'"'+b.folderId+'","'+b.folderName+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-remove'></span> 删除</button>"),d&&(e=e+"<button onclick='showRenameFolderModel("+'"'+b.folderId+'","'+b.folderName+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-wrench'></span> 重命名</button>"),d||c||(e+="--"),e+="</td></tr>",$("#foldertable").append(e)}),$.each(a.fileList,function(a,b){var f="<tr onclick='checkfile(\""+b.fileId+'"'+")' id='"+b.fileId+"' class='filerow'><td>"+b.fileName+"</td><td>"+b.fileCreationDate+"</td><td>"+b.fileSize+"MB</td><td>"+b.fileCreator+"</td><td>";e&&(f=f+"<button onclick='showDownloadModel("+'"'+b.fileId+'","'+b.fileName+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-cloud-download'></span> 下载</button>","mp4"==getSuffix(b.fileName)||"webm"==getSuffix(b.fileName)?f=f+"<button onclick='playVideo("+'"'+b.fileId+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-play'></span> 播放</button>":"pdf"==getSuffix(b.fileName)?f=f+"<button onclick='pdfView("+'"'+b.fileId+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-eye-open'></span> 预览</button>":("jpg"==getSuffix(b.fileName)||"jpeg"==getSuffix(b.fileName)||"gif"==getSuffix(b.fileName)||"png"==getSuffix(b.fileName)||"bmp"==getSuffix(b.fileName))&&(f=f+"<button onclick='showPicture("+'"'+b.fileId+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-picture'></span> 查看</button>")),c&&(f=f+"<button onclick='showDeleteFileModel("+'"'+b.fileId+'","'+b.fileName+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-remove'></span> 删除</button>"),d&&(f=f+"<button onclick='showRenameFileModel("+'"'+b.fileId+'"'+","+'"'+b.fileName+'"'+")' class='btn btn-link btn-xs'><span class='glyphicon glyphicon-wrench'></span> 重命名</button>"),d||c||e||(f+="--"),f+="</td></tr>",$("#foldertable").append(f)})}function showNewFolderModel(){$("#foldername").val(""),$("#newFolderModal").modal("toggle")}function createfolder(){var a=$("#foldername").val(),b=new RegExp("^[0-9a-zA-Z_\\u4E00-\\u9FFF]+$","g");0==a.length?showFolderAlert("提示：文件夹名称不能为空。"):a.length>20?showFolderAlert("提示：文件夹名称太长。"):b.test(a)?($("#folderalert").removeClass("alert"),$("#folderalert").removeClass("alert-danger"),$("#foldernamebox").removeClass("has-error"),$("#folderalert").text(""),$.ajax({type:"POST",dataType:"text",data:{parentId:locationpath,folderName:a},url:"homeController/newFolder.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"noAuthorized"==a?showFolderAlert("提示：您的操作未被授权，创建文件夹失败"):"errorParameter"==a?showFolderAlert("提示：参数不正确，创建文件夹失败"):"cannotCreateFolder"==a?showFolderAlert("提示：出现意外错误，可能未能创建文件夹"):"folderAlreadyExist"==a?showFolderAlert("提示：该文件夹已经存在，请更换文件夹名称"):"createFolderSuccess"==a?($("#newFolderModal").modal("hide"),showFolderView(locationpath)):($("#newFolderModal").modal("hide"),showFolderView(locationpath))},error:function(){showFolderAlert("提示：出现意外错误，可能未能创建文件夹")}})):showFolderAlert("提示：文件夹名只能包含英文字母、数组、汉字和下划线。")}function showFolderAlert(a){$("#folderalert").addClass("alert"),$("#folderalert").addClass("alert-danger"),$("#foldernamebox").addClass("has-error"),$("#folderalert").text(a)}function entryFolder(a){showFolderView(a)}function showDeleteFolderModel(a,b){$("#deleteFolderBox").html("<button id='dmbutton' type='button' class='btn btn-danger' onclick='deleteFolder(\""+a+'"'+")'>删除</button>"),$("#dmbutton").attr("disabled",!1),$("#deleteFolderMessage").text("提示：确定要彻底删除文件夹：["+b+"]及其全部内容么？该操作不可恢复"),$("#deleteFolderModal").modal("toggle")}function deleteFolder(a){$("#dmbutton").attr("disabled",!0),$("#deleteFolderMessage").text("提示：正在删除，请稍候..."),$.ajax({type:"POST",dataType:"text",data:{folderId:a},url:"homeController/deleteFolder.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"noAuthorized"==a?($("#deleteFolderMessage").text("提示：您的操作未被授权，删除文件夹失败"),$("#dmbutton").attr("disabled",!1)):"errorParameter"==a?($("#deleteFolderMessage").text("提示：参数不正确，删除文件夹失败"),$("#dmbutton").attr("disabled",!1)):"cannotDeleteFolder"==a?($("#deleteFolderMessage").text("提示：出现意外错误，可能未能删除文件夹"),$("#dmbutton").attr("disabled",!1)):"deleteFolderSuccess"==a?($("#deleteFolderModal").modal("hide"),showFolderView(locationpath)):($("#deleteFolderMessage").text("提示：出现意外错误，可能未能删除文件夹"),$("#dmbutton").attr("disabled",!1))},error:function(){$("#deleteFolderMessage").text("提示：出现意外错误，可能未能删除文件夹"),$("#dmbutton").attr("disabled",!1)}})}function showRenameFolderModel(a,b){$("#newfolderalert").removeClass("alert"),$("#newfolderalert").removeClass("alert-danger"),$("#folderrenamebox").removeClass("has-error"),$("#newfolderalert").text(""),$("#renameFolderBox").html("<button type='button' class='btn btn-primary' onclick='renameFolder(\""+a+'"'+")'>修改</button>"),$("#newfoldername").val(b),$("#renameFolderModal").modal("toggle")}function renameFolder(a){var b=$("#newfoldername").val(),c=new RegExp("^[0-9a-zA-Z_\\u4E00-\\u9FFF]+$","g");0==b.length?showRenameFolderAlert("提示：文件夹名称不能为空。"):b.length>20?showRenameFolderAlert("提示：文件夹名称太长。"):c.test(b)?($("#newfolderalert").removeClass("alert"),$("#newfolderalert").removeClass("alert-danger"),$("#folderrenamebox").removeClass("has-error"),$("#newfolderalert").text(""),$.ajax({type:"POST",dataType:"text",data:{folderId:a,newName:b},url:"homeController/renameFolder.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"noAuthorized"==a?showRenameFolderAlert("提示：您的操作未被授权，重命名失败"):"errorParameter"==a?showRenameFolderAlert("提示：参数不正确，重命名失败"):"cannotRenameFolder"==a?showRenameFolderAlert("提示：出现意外错误，可能未能重命名文件夹"):"renameFolderSuccess"==a?($("#renameFolderModal").modal("hide"),showFolderView(locationpath)):showRenameFolderAlert("提示：出现意外错误，可能未能重命名文件夹")},error:function(){showRenameFolderAlert("提示：出现意外错误，可能未能重命名文件夹")}})):showRenameFolderAlert("提示：文件夹名只能包含英文字母、数组、汉字和下划线")}function showRenameFolderAlert(a){$("#newfolderalert").addClass("alert"),$("#newfolderalert").addClass("alert-danger"),$("#folderrenamebox").addClass("has-error"),$("#newfolderalert").text(a)}function showUploadFileModel(){$("#uploadFileAlert").removeClass("alert"),$("#uploadFileAlert").removeClass("alert-danger"),$("#uploadFileAlert").text(""),$("#uploadFileModal").modal("toggle")}function checkpath(){$("#uploadfile").click()}function showfilepath(){var c,a=$("#uploadfile").get(0).files,b="";for(c=0;c<a.length;c++)b+=a[c].name,c<a.length-1&&(b+="、");a.length<=1?$("#selectcount").text(""):$("#selectcount").text("（共"+a.length+"个）"),$("#filepath").val(b)}function checkUploadFile(){var a,b,c,d;for($("#umbutton").attr("disabled",!0),$("#uploadFileAlert").removeClass("alert"),$("#uploadFileAlert").removeClass("alert-danger"),$("#uploadFileAlert").text(""),a=$("#uploadfile").get(0).files,b=new Array,c=0;c<a.length;c++)b[c]=a[c].name.replace(/^.+?\\([^\\]+?)?$/gi,"$1");d=JSON.stringify(b),$.ajax({type:"POST",dataType:"text",data:{folderId:locationpath,namelist:d},url:"homeController/checkUploadFile.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"errorParameter"==a?showUploadFileAlert("提示：参数不正确，无法开始上传"):"noAuthorized"==a?showUploadFileAlert("提示：您的操作未被授权，无法开始上传"):a.startsWith("duplicationFileName:")?showUploadFileAlert("提示：本路径下已存在同名的文件:["+a.substring(20)+"]，无法开始上传"):"permitUpload"==a?doupload(1):showUploadFileAlert("提示：出现意外错误，无法开始上传")},error:function(){showUploadFileAlert("提示：出现意外错误，无法开始上传")}})}function doupload(a){var d,e,f,b=$("#uploadfile").get(0).files,c=b.length;$("#pros").width("0%"),d=b[a-1],null!=d?(e=d.name,c>1&&$("#filecount").text("（"+a+"/"+c+"）"),$("#uploadstatus").prepend("<p>"+e+"<span id='uls_"+a+"'>[正在上传...]</span></p>"),xhr=new XMLHttpRequest,f=new FormData,f.append("file",d),f.append("folderId",locationpath),xhr.open("POST","homeController/douploadFile.ajax",!0),xhr.upload.addEventListener("progress",uploadProgress,!1),xhr.send(f),xhr.onloadend=function(){if(200===xhr.status){var b=xhr.responseText;"uploadsuccess"==b?($("#uls_"+a).text("[已完成]"),c>a?doupload(a+1):($("#uploadfile").val(""),$("#filepath").val(""),$("#pros").width("0%"),$("#uploadFileModal").modal("hide"),$("#umbutton").attr("disabled",!1),showFolderView(locationpath),$("#filecount").text(""),$("#uploadstatus").text(""),$("#selectcount").text(""))):"uploaderror"==b?(showUploadFileAlert("提示：出现意外错误，文件：["+e+"]上传失败，上传被中断。"),$("#uls_"+a).text("[失败]")):($("#uploadFileModal").modal("hide"),$("#uls_"+a).text("[失败]"))}else showUploadFileAlert("提示：出现意外错误，文件：["+e+"]上传失败，上传被中断。"),$("#uls_"+a).text("[失败]")}):(showUploadFileAlert("提示：要上传的文件不存在。"),$("#uploadstatus").prepend("<p>未找到要上传的文件<span id='uls_"+a+"'>[失败]</span></p>"))}function uploadProgress(a){if(a.lengthComputable){var b=Math.round(100*a.loaded/a.total);$("#pros").width(b+"%")}}function showUploadFileAlert(a){$("#uploadFileAlert").addClass("alert"),$("#uploadFileAlert").addClass("alert-danger"),$("#uploadFileAlert").text(a),$("#umbutton").attr("disabled",!1)}function showDownloadModel(a,b){$("#downloadModal").modal("toggle"),$("#downloadFileName").text("提示：您确认要下载文件：["+b+"]么？"),$("#downloadFileBox").html("<button id='dlmbutton' type='button' class='btn btn-primary' onclick='dodownload(\""+a+'"'+")'>开始下载</button>"),$("#dlmbutton").attr("disabled",!1)}function dodownload(a){$("#dlmbutton").attr("disabled",!0),$("#downloadFileName").text("提示：准备开始下载，请稍候..."),setTimeout("$('#downloadModal').modal('hide');",800),window.location.href="homeController/downloadFile.do?fileId="+a}function showDeleteFileModel(a,b){$("#deleteFileBox").html("<button id='dfmbutton' type='button' class='btn btn-danger' onclick='deleteFile(\""+a+'"'+")'>删除</button>"),$("#dfmbutton").attr("disabled",!1),$("#deleteFileMessage").text("提示：确定要彻底删除文件：["+b+"]么？该操作不可恢复"),$("#deleteFileModal").modal("toggle")}function deleteFile(a){$("#dfmbutton").attr("disabled",!0),$("#deleteFileMessage").text("提示：正在删除，请稍候..."),$.ajax({type:"POST",dataType:"text",data:{fileId:a},url:"homeController/deleteFile.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"noAuthorized"==a?($("#deleteFileMessage").text("提示：您的操作未被授权，删除失败"),$("#dfmbutton").attr("disabled",!1)):"errorParameter"==a?($("#deleteFileMessage").text("提示：参数不正确，删除失败"),$("#dfmbutton").attr("disabled",!1)):"cannotDeleteFile"==a?($("#deleteFileMessage").text("提示：出现意外错误，可能未能删除文件"),$("#dfmbutton").attr("disabled",!1)):"deleteFileSuccess"==a?($("#deleteFileModal").modal("hide"),showFolderView(locationpath)):($("#deleteFileMessage").text("提示：出现意外错误，可能未能删除文件"),$("#dfmbutton").attr("disabled",!1))},error:function(){$("#deleteFileMessage").text("提示：出现意外错误，可能未能删除文件"),$("#dfmbutton").attr("disabled",!1)}})}function showRenameFileModel(a,b){$("#newFileNamealert").removeClass("alert"),$("#newFileNamealert").removeClass("alert-danger"),$("#filerenamebox").removeClass("has-error"),$("#newFileNamealert").text(""),$("#renameFileBox").html("<button type='button' class='btn btn-primary' onclick='renameFile(\""+a+'"'+")'>修改</button>"),$("#newfilename").val(b),$("#renameFileModal").modal("toggle")}function renameFile(a){var b=new RegExp('[/|\\s\\\\*\\<\\>"]+',"g"),c=$("#newfilename").val();c.length>0?c.length<128?b.test(c)?showRenameFolderAlert("提示：文件名中不应含有：空格 引号 /  * | < > "):$.ajax({type:"POST",dataType:"text",data:{fileId:a,newFileName:c},url:"homeController/renameFile.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"cannotRenameFile"==a?showRenameFolderAlert("提示：出现意外错误，可能未能重命名文件"):"renameFileSuccess"==a?($("#renameFileModal").modal("hide"),showFolderView(locationpath)):"errorParameter"==a?showRenameFolderAlert("提示：参数错误，重命名失败"):"noAuthorized"==a?showRenameFolderAlert("提示：您的操作未被授权，重命名失败"):showRenameFolderAlert("提示：出现意外错误，可能未能重命名文件")},error:function(){showRenameFolderAlert("提示：出现意外错误，可能未能重命名文件")}}):showRenameFolderAlert("提示：文件名称太长"):showRenameFolderAlert("提示：文件名不能为空")}function showRenameFolderAlert(a){$("#newFileNamealert").addClass("alert"),$("#newFileNamealert").addClass("alert-danger"),$("#filerenamebox").addClass("has-error"),$("#newFileNamealert").text(a)}function abortUpload(){null!=xhr&&(xhr.abort(),$("#umbutton").attr("disabled",!1),$("#pros").width("0%"),$("#filecount").text("")),$("#uploadfile").val(""),$("#filepath").val(""),$("#uploadstatus").html(""),$("#selectcount").text(""),$("#uploadFileModal").modal("hide"),showFolderView(locationpath)}function getSuffix(a){var b=a.lastIndexOf("."),c=a.length,d=a.substring(b+1,c);return d.toLowerCase()}function playVideo(a){window.open("homeController/playVideo.do?fileId="+a)}function pdfView(a){window.open("homeController/pdfView.do?fileId="+a)}function showPicture(a){window.open("homeController/showPicture.do?fileId="+a)}function checkfile(a){$("#"+a).hasClass("info")?$("#"+a).removeClass("info"):$("#"+a).addClass("info")}function checkallfile(){checkAll?($(".filerow").addClass("info"),checkAll=!1):($(".filerow").removeClass("info"),checkAll=!0)}function showDownloadAllCheckedModel(){$("#downloadFileBox").html("");var a=$(".info").get();0==a.length?$("#downloadFileName").text("提示：您还未选择任何文件，请先选中一些文件后再执行本操作（您可以通过点击某一文件行来选中/取消选中文件，也可以通过点击列表上的“文件名”一栏来选中/取消选中所有文件）"):($("#downloadFileName").text("提示：您确认要打包并下载这"+a.length+"项么？"),$("#downloadFileBox").html("<button id='dlmbutton' type='button' class='btn btn-primary' onclick='downloadAllChecked()'>开始下载</button>"),$("#dlmbutton").attr("disabled",!1)),$("#downloadModal").modal("toggle")}function downloadAllChecked(){var c,d,f,g,a=$(".info").get(),b=new Array;for(c=0;c<a.length;c++)b[c]=a[c].id;d=JSON.stringify(b),$("#dlmbutton").attr("disabled",!0),$("#downloadFileName").text("提示：准备开始下载（共"+a.length+"项），请稍候..."),setTimeout("$('#downloadModal').modal('hide');",1e3),f=document.createElement("form"),f.action="homeController/downloadCheckedFiles.do",f.method="post",f.style.display="none",g=document.createElement("input"),g.name="strIdList",g.value=d,f.appendChild(g),document.body.appendChild(f),f.submit()}function showDeleteAllCheckedModel(){$("#deleteFileBox").html("");var a=$(".info").get();$("#dfmbutton").attr("disabled",!1),0==a.length?$("#deleteFileMessage").text("提示：您还未选择任何文件，请先选中一些文件后再执行本操作（您可以通过点击某一文件行来选中/取消选中文件，也可以通过点击列表上的“文件名”一栏来选中/取消选中所有文件）"):($("#deleteFileBox").html("<button id='dfmbutton' type='button' class='btn btn-danger' onclick='deleteAllChecked()'>全部删除</button>"),$("#deleteFileMessage").text("提示：确定要彻底删除这"+a.length+"项么？该操作不可恢复")),$("#deleteFileModal").modal("toggle")}function deleteAllChecked(){var c,d,a=$(".info").get(),b=new Array;for(c=0;c<a.length;c++)b[c]=a[c].id;d=JSON.stringify(b),$("#dfmbutton").attr("disabled",!0),$("#deleteFileMessage").text("提示：正在删除，请稍候..."),$.ajax({type:"POST",dataType:"text",data:{strIdList:d},url:"homeController/deleteCheckedFiles.ajax",success:function(a){"mustLogin"==a?window.location.href="login.jsp":"noAuthorized"==a?($("#deleteFileMessage").text("提示：您的操作未被授权，删除失败"),$("#dfmbutton").attr("disabled",!1)):"errorParameter"==a?($("#deleteFileMessage").text("提示：参数不正确，未能全部删除文件"),$("#dfmbutton").attr("disabled",!1)):"cannotDeleteFile"==a?($("#deleteFileMessage").text("提示：出现意外错误，可能未能删除全部文件"),$("#dfmbutton").attr("disabled",!1)):"deleteFileSuccess"==a?($("#deleteFileModal").modal("hide"),showFolderView(locationpath)):($("#deleteFileMessage").text("提示：出现意外错误，可能未能删除全部文件"),$("#dfmbutton").attr("disabled",!1))},error:function(){$("#deleteFileMessage").text("提示：出现意外错误，可能未能删除全部文件"),$("#dfmbutton").attr("disabled",!1)}})}var xhr,checkAll,locationpath="root",parentpath="null";$(function(){getServerOS(),showFolderView("root"),$(document).bind("contextmenu",function(){return!1}),$("body").mousedown(function(a){3==a.which&&$(".filerow").removeClass("info")})}),checkAll=!0;